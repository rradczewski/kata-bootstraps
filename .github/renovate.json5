{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:base",
    "docker:enableMajor"
  ],
  "ignorePresets": [
    "workarounds:javaLTSVersions"
  ],
  "dependencyDashboard": true,
  "automerge": true,
  "automergeType": "branch",
  "commitMessagePrefix": "[{{packageFileDir}}] {{semanticPrefix}}",
  "packageRules": [
    {
      "matchDatasources": [
        "docker"
      ],
      "defaultRegistryUrls": [
        "https://index.docker.io"
      ]
    }
  ],
  "regexManagers": [
    {
      "fileMatch": [
        "\\.?devcontainer.json$"
      ],
      "matchStrings": [
        "\"image\" *: *\"(?<depName>.+?):(?<currentValue>.+?)\",?"
      ],
      "datasourceTemplate": "docker"
    },
    {
      "fileMatch": [
        "(^|/|\\.)pom\\.xml$"
      ],
      "matchStrings": [
        "<maven\\.compiler\\.release>(?<currentValue>.*?)<\\/maven\\.compiler\\.release>"
      ],
      "depNameTemplate": "java-jdk",
      "datasourceTemplate": "java-version",
      "versioningTemplate": "regex:(?<major>\\d+)",
      "autoReplaceStringTemplate": "<maven.compiler.release>{{{major}}}</maven.compiler.release>"
    },
    {
      "fileMatch": [
        "(^|/|\\.)build\\.gradle$"
      ],
      "matchStrings": [
        "jvmToolchain\\((?<currentValue>.*?)\\)"
      ],
      "depNameTemplate": "java-jdk",
      "datasourceTemplate": "java-version",
      "versioningTemplate": "regex:(?<major>\\d+)",
      "autoReplaceStringTemplate": "jvmToolchain({{{major}}})"
    },
    {
      "fileMatch": [
        "(^|/)gleam\\.toml$"
      ],
      "matchStringsStrategy": "recursive",
      "matchStrings": [
        "\\[(dependencies|dev-dependencies)\\]\\s*[^\\[]*",
        "(?<depName>.+?) *= *\"(?<currentValue>.+?)\""
      ],
      "versioningTemplate": "hex",
      "datasourceTemplate": "hex"
    }
    // {
    //   "fileMatch": [
    //     "(^|/|\\.)Dockerfile$",
    //     "(^|/)Dockerfile[^/]*$"
    //   ],
    //   "matchStrings": [
    //     "renovate: datasource=(?<datasource>.*?) depName=(?<depName>.*?)( versioning=(?<versioning>.*?))?\\s+ARG .*?_VERSION=(?<currentValue>.*)\\s"
    //   ],
    //   "versioningTemplate": "{{#if versioning}}{{{versioning}}}{{else}}semver{{/if}}"
    // }
  ]
}